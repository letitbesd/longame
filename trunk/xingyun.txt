北京市海淀区北四环西路66号第三极大厦B座18层 (100080)


长沙国防科技大学三院七队 410073 


李亚，凤凰新媒体CEO
liya@ifeng.com

有篇文章讲到通过PHP脚本中转加载图片声音等素材，便不涉及到flash的跨域问题，缺点是服务器得一进一出，双倍开销，
在不必要情况下不使用。然后想到通过这个来加载主SWF，是否可以实现主SWF对于缓存隐藏，当然内存里或者传输通道上
还是可以截取得到的，如果加载时给PHP提供一个代号，让PHP返回对应的swf主文件，那么即使别人破解了你的loader，他
也看不到你的swf路经，然后你可以在服务器端弄一个服务器列表，列表外的请求不通过，可以很好隐藏主swf的目的，至于
内存获取swf得研究，这个至少阻挡了很多人！

urlLoader统一加载资源？

结合PushButton的组件机制，将场景中的元素都设计成Entity，然后按需添加需要的组件，感觉是不错的，有时间研究

xml某个属性没有定义的话，在as里叫undefined，我靠，不是null，不是""，而是undefined


MovieClip UI

主类用标签指定其MovieClip元件
类中用[Part]标签分别制定其关键子元素，在类初始化时自动寻找对应名字的子元件并赋值，类型如果指定某个其他的MovieClip
UI,如MCButton，则自动创建。

下一步：
  1. 怪物追踪人物的时候，如果追踪人数多了，有个别怪找不到地方攻击就会卡在那里，另外，如果设人物被怪追踪的最大数量，貌似还有问题。
  2. link变量要doWhenRefresh后才能拿到，这个经常在doWhenActive后面，而我们经常用doWhenActive作为启动函数，这个解决下。
  3. 地图编辑器中，放置人物或怪物时，会弹出一个框，提示输入出现概率，点击点将成为怪物刷新点，然后整个场景会设置一个最大怪物数
和刷新时间，一个怪物死亡后会在刷新时间后重新出现一个怪，这些信息都会被记录到场景xml的头部。
  4. 点击场景中的物品，有一个属性框，可以设置对象的鼠标交互，信号名字（被注册到SignalBus)，over和down的效果，效果全是预设的
位图效果，还包括掉落的物品，或随机在地上的物品，都具有这种交互性。
   5.不管是hero还是monster，都具备idle,follow,attack,die,escape等状态，hero无鼠标点击时是idle，鼠标点击空白区域会移动，
点击到怪物会进入follow，到怪物身边会进入attack，再点击鼠标会又进入idle，这样还可以让hero自动打怪。。。牛逼么？
  6. 场景显示grid的时候，向后面偏移了半个格子
  1. GameAnimator的播放帧频和人物的当前状态关联起来，比如人物攻击牛的时候动作会快，跑步的时候动作会快
  2. 寻路优化，跟随优化
  

  0. 九宫格地貌，做一个专门的layer来搞九宫格地貌，如雪地，边缘是透明的，castway这种设计不好，树也应该是根部无泥土
  1. 地面这种重复性大group，如果不用图片，那么没必要一个N × N的Map吧，浪费。。  
  2. 对于图片做地面时，需要有个空DisplayEntity来占据每个格子，当然是手动设定GroupMap的每个格子的可行走，autoLayout
为flase时，可以缓存为图片
  3. 对于1和2，可以考虑场景全部位图渲染，如果molehill流行后，直接通过GPU渲染，牛逼了
1. 奇怪的是，新mapEditor的场景运行很慢。。。人物加进来后，CPU占用上升到40%，todo

  6. 目前由于寻路的缘故，所有物品只能放在x>=0,y>=0的扇形区间内，而且寻路机制导致原点没有物品时，会出错，因为它
是根据map.width，map.height来做一些判断，而不是通过left,right,back,front来做判断，以后再改，先遵循此机制即可。
  7. SceneOrigin目前加入到场景也看不到，汗。。。。
  8. 导入场景，放入人物点击几下后，新建一场景，场景的鼠标响应没有了，估计是InputManager的问题。

 # 2. 重新定义两个类，Scene2D,Scene25D,前者暂放，后者加三个默认层，upGround,ground,backGround，代表地面物品层，
地面层，背景层，地面物品层用于放置景观和人物活动，地面层用于展示地面（可以是基础地貌+复杂地貌（路+河+湖+山。。。））
而复杂地貌可以用九宫格来做。背景层像一个场景容器，比如一个岛，一个飘忽在空中的行星，所有地面物品都在其上。
如果需要，将地面层和背景层在场景编辑器中做好后输出图片，游戏运行效率会更高,或cacheAsBitmap,效率再思考必要。
backGround,ground和upGround是个DisplayGroup,他们的includeInLayout都为false。
DisplayGroup添加一个新方法：createFromAsset(source:*),source可以是RenderManger.getDisplayFromSource中的任何值，
这个时候DisplayGroup会自动创建一个SpriteEntity，其source等于source。
DisplayEntity再添加一个新方法：createFromXml(xml),createFromLibrary(id),除了scene.xml，还会有个
sceneLibrary.xml，后者会定义一些会重复利用的DisplayGroup或DisplayEntity，每个都会有id，就像items一样，然后
根据id对应的xml来创建对象，这样需要更改场景解析和导出的格式。

  3. 新定义一个类，   

  组件和BOX2D
  完善以适应各种游戏2D，横版，2.5D

UI:
  用类的[Embed(source="ui.swf" symbol="okButton")]来做皮肤




2d场景排序还要调下，不着急。。。



战斗场景现在渲染如果是bitmap，会很怪异，当然这个游戏里不能bitmap渲染，特效没法展现

bug:攻击的时候，攻击一方应该在前面

bug:buff的计算还得调整，有些不用百分比，用点数，wow
bug:现在buff加时宠物无动作

bug:后台还需记录mana值，防止作弊。。。，检查每次攻击请求的mana值是否满足要求

bug:buff和物品使用的后台计算
bug:草莓种植

bug:家里宠物当鼠标移动上去后，效果不对，idleWalk组件会让宠物走一段
bug：和房子之间的层次排序问题，拖动宠物后可能走出屏幕，宠物尺寸大于一个方格大小时也会不分边界的乱走


当出现莫名的后台问题，看下log




设想：buff使用可以选择，比如对于暴击高的monster就是用降低暴击的buff，这样使得游戏更具策略性？
设想：自助制作宠物明星片。。。
设想：物品使用模仿魔兽世界里的图腾，会更有趣
设想：家里宠物每隔一段时间会随机掉一些毛皮，羽毛，玩家上线收集这些材料用于制造号角，鼓励他邀请更多的朋友，
以便于到朋友家去捡东西，取代种号角
设想：家里可以有很多装饰，树啊石头啊，这些装饰影响宠物的整体属性，宠物可能生病？
设想：跟好友pk


细化的里程碑：
?DEMO版本完成：确保完整的游戏核心体验，即完成游戏的“核心玩法系统”。【战斗系统+怪物组队+怪物管理+草莓种植+怪物图鉴】
?内测版本完成：游戏核心系统开发完善，任务系统、游戏内外互动系统搭建完成，有部分内容。【任务框架搭建完毕并有一个故事内容+登录邀请+seed好友索要交互+好友互偷草莓】
?公测版本完成：游戏周边支持系统开发完成，完成1个月以上的游戏内容，质量达成可在平台上线的标准【游戏中大约50个任务故事+支付系统+平台翻译+数据统计完善+运营活动】
?开始正式运营（最终里程碑）：重要数据达标（如保留率等），通过产品委员会审核，和运营部门对接完成正式运营准备。


白银：7.45 5000
白银: 7.71 5000
